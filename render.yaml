services:
  # Define el servicio web que se construirá usando tu Dockerfile
  - type: web
    name: GestionActivos # El nombre de tu servicio web
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    
    # === LA CORRECCIÓN FINAL Y DIRECTA ESTÁ AQUÍ ===
    # Pasamos los valores directamente, sin 'fromDatabase' ni 'fromSecretFile'
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
        
      - key: ConnectionStrings__DefaultConnection
        # ¡Pega aquí tu INTERNAL Connection String!
        value: "postgresql://sistema_gestion_activos_user:d8ESuQeZq749aV631SES44PcXPkDqryo@dpg-d4bpt17gi27c73bjcjp0-a/sistema_gestion_activos"
        
      - key: GoogleAI__ApiKey
        # ¡Pega aquí tu clave de API de Google!
        value: "AIzaSyABOn5JM-NTQrEG24DlBm2U7bKj9vxKMn8"

  # Define el servicio de tu base de datos PostgreSQL
  - type: psql
    name: sistema-gestion-activos # El nombre de tu base de datos
    plan: free